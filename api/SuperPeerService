package com.iit.cao.pa3.api;

import com.iit.cao.pa3.database.bean.Peer;
import com.iit.cao.pa3.pojo.Message;
import com.iit.cao.pa3.pojo.Response;
import com.iit.cao.pa3.pojo.UpdateMessage;

import java.io.File;
import java.util.List;

public interface SuperPeerService {

    Response register(Integer peerId, String serverName, File file);

    Response registerAllFiles(Integer peerId, String serverName, List<File> files);

    Response unregisterFile(Integer peerId, String fileName, Boolean isUpdate);

    /**
     * 以广播的方式传播消息体，查询包含文件名的peer列表
     *
     * @param message
     * @return
     */
    List<Peer> queryFile(Message message);

    void broadcastUpdateMsg(UpdateMessage message);

    Response freshFileVersion(File file, Integer peerId);

    Response unregisterPeer(String serverName, Integer peerId);

}
